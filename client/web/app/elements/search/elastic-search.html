<dom-module id="eleastic-search">
    <template>
        <iron-ajax
                id="ajax"
                last-response="{{lastResponse}}"
        ></iron-ajax>
    </template>
    <script>
        Polymer({
            is: "eleastic-search",
            properties:{
                lastResponse: {
                    type: Object,
                    notify: true,
                    readOnly: false
                }
            },
            index: "/lecture/",
            query: function(search){
                var url = Config.urls.elasticsearch + this.index + "_search?q=" + search + "*";
                this.$.ajax.url = url;
                this.$.ajax.method = "GET";
                this.$.ajax.generateRequest();
            },
            createOrUpdate: function(key, data) {
                console.log("data for post: ", data);
                this.$.ajax.url = Config.urls.elasticsearch + this.index + data.category + "/" + key;
                this.$.ajax.body = data;
                this.$.ajax.contentType = "application/json";
                this.$.ajax.method = "PUT";
                this.$.ajax.generateRequest();
            },
            delete: function(category, key){
                console.log("data for delete: ", key);
                this.$.ajax.url = Config.urls.elasticsearch + this.index + category + "/" + key;
                this.$.ajax.method = "DELETE";
                this.$.ajax.generateRequest();
            }
        });
    </script>
</dom-module>